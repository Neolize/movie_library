{% extends 'base.html' %}

{% load static %}

{% block title %} Select random movies {% endblock title %}

{% block content %}
    <div class="random-movies_block editContent" tabindex="1">
        <h3 class="title_add_form editContent" style="outline: none; cursor: inherit; margin-bottom: 50px;">
            <span class="sub-tittle editContent"
                  style="outline: none; cursor: inherit;">
            </span>Случайные фильмы
        </h3>
        <form action="" method="post" name="random_movies_form">
            {% csrf_token %}

            {% if form.non_field_errors %}
                <div class="alert alert-danger" style="margin-bottom: 25px;">{{ form.non_field_errors }}</div>
            {% endif %}

            <div class="d-sm-flex">
                <div class="col-sm-6 form-group p-0 editContent" style="max-width: 225px; margin-right: 49px;">
                    <label for="{{ form.movies_number.id_for_label }}" class="editContent">{{ form.movies_number.label }} * </label>
                    {{ form.movies_number }}

                    {% if form.movies_number.errors %}
                        <div class="alert alert-danger mt-3">{{ form.movies_number.errors }}</div>
                    {% endif %}
                </div>

                 <div class="col-sm-6 form-group p-0 editContent">
                    <label for="{{ form.years.id_for_label }}" class="editContent">{{ form.years.label }} * </label>
                    {{ form.years }}

                    {% if form.years.errors %}
                        <div class="alert alert-danger mt-3">{{ form.years.errors }}</div>
                    {% endif %}
                </div>
            </div>

            <div class="d-sm-flex">
                <div class="col-sm-6 form-group p-0 editContent" style="max-width: 225px; margin-right: 49px;">
                    <label for="{{ form.countries.id_for_label }}" class="editContent">{{ form.countries.label }} * </label>
                    {{ form.countries }}

                    {% if form.countries.errors %}
                        <div class="alert alert-danger mt-3">{{ form.countries.errors }}</div>
                    {% endif %}
                </div>

                 <div class="col-sm-6 form-group p-0 editContent">
                    <label for="{{ form.genres.id_for_label }}" class="editContent">{{ form.genres.label }} * </label>
                    {{ form.genres }}

                    {% if form.genres.errors %}
                        <div class="alert alert-danger mt-3">{{ form.genres.errors }}</div>
                    {% endif %}
                </div>
            </div>

            <button type="submit" class="btn btn-success btn-block py-3 mt-4">
                Подобрать случайные фильмы
            </button>
        </form>
    </div>

    <div class="movies_list col-lg-9" tabindex="2">
        {% if movies|length == 1 %}
            {% for movie in movies %}
                <div class="distinct-elem">
                    <div class="product-shoe-info editContent text-center mt-lg-4" >
                        <div class="men-thumb-item">
                            {% if movie.poster %}
                                <img src="{{ movie.poster.url }}" class="img-fluid" alt="{{ movie.title }}" >
                            {% endif %}
                        </div>
                        <div class="item-info-product">
                            <h4 class="">
                                <a href="{{ movie.get_absolute_url }}" class="editContent" >{{ movie.title }}</a>
                            </h4>

                            <div class="product_price">
                                <div class="grid-price">
                                    <span class="money editContent" >{{ movie.tagline }}</span>
                                </div>
                            </div>
                            <ul class="stars">
                                <li><a href="#"><span class="fa fa-star" aria-hidden="true" ></span></a></li>
                                <li><a href="#"><span class="fa fa-star" aria-hidden="true" ></span></a></li>
                                <li><a href="#"><span class="fa fa-star-half-o" aria-hidden="true" ></span></a></li>
                                <li><a href="#"><span class="fa fa-star-half-o" aria-hidden="true" ></span></a></li>
                                <li><a href="#"><span class="fa fa-star-o" aria-hidden="true" ></span></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            {% endfor %}

        {% elif movies|length == 2 %}
            <div class="row">
                {% for movie  in movies %}
                    <div class="col-md-4 product-men" style="margin: 0 auto; max-width: 500px; height: auto;">
                        <div class="product-shoe-info editContent text-center mt-lg-4" >
                            <div class="men-thumb-item">
                                {% if movie.poster %}
                                    <img src="{{ movie.poster.url }}" class="img-fluid" alt="{{ movie.title }}" >
                                {% endif %}
                            </div>
                            <div class="item-info-product">
                                <h4 class="">
                                    <a href="{{ movie.get_absolute_url }}" class="editContent" >{{ movie.title }}</a>
                                </h4>

                                <div class="product_price">
                                    <div class="grid-price">
                                        <span class="money editContent" >{{ movie.tagline }}</span>
                                    </div>
                                </div>
                                <ul class="stars">
                                    <li><a href="#"><span class="fa fa-star" aria-hidden="true" ></span></a></li>
                                    <li><a href="#"><span class="fa fa-star" aria-hidden="true" ></span></a></li>
                                    <li><a href="#"><span class="fa fa-star-half-o" aria-hidden="true" ></span></a></li>
                                    <li><a href="#"><span class="fa fa-star-half-o" aria-hidden="true" ></span></a></li>
                                    <li><a href="#"><span class="fa fa-star-o" aria-hidden="true" ></span></a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="row">
                {% for movie  in movies %}
                    <div class="col-md-4 product-men" style="margin: 0 50px; max-width: 350px; height: auto;">
                        <div class="product-shoe-info editContent text-center mt-lg-4" >
                            <div class="men-thumb-item">
                                {% if movie.poster %}
                                    <img src="{{ movie.poster.url }}" class="img-fluid" alt="{{ movie.title }}" >
                                {% endif %}
                            </div>
                            <div class="item-info-product">
                                <h4 class="">
                                    <a href="{{ movie.get_absolute_url }}" class="editContent" >{{ movie.title }}</a>
                                </h4>

                                <div class="product_price">
                                    <div class="grid-price">
                                        <span class="money editContent" >{{ movie.tagline }}</span>
                                    </div>
                                </div>
                                <ul class="stars">
                                    <li><a href="#"><span class="fa fa-star" aria-hidden="true" ></span></a></li>
                                    <li><a href="#"><span class="fa fa-star" aria-hidden="true" ></span></a></li>
                                    <li><a href="#"><span class="fa fa-star-half-o" aria-hidden="true" ></span></a></li>
                                    <li><a href="#"><span class="fa fa-star-half-o" aria-hidden="true" ></span></a></li>
                                    <li><a href="#"><span class="fa fa-star-o" aria-hidden="true" ></span></a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    </div>
{% endblock content %}

{% block script %}
<script>
    window.scrollTo(0, 850);
</script>
{% endblock script %}